"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * From https://github.com/charlieduong94/util-promisifyAll/blob/master/index.js
 */
// @ts-ignore
const util_1 = require("util");
const functionBlackListMap = Object.getOwnPropertyNames(Object.prototype)
    .reduce(function (map, functionName) {
    map[functionName] = true;
    return map;
}, {});
function _promisifyAllFunctions(object) {
    for (const key of Object.getOwnPropertyNames(object)) {
        if (functionBlackListMap[key]) {
            continue;
        }
        const descriptor = Object.getOwnPropertyDescriptor(object, key);
        if (descriptor && !descriptor.get) {
            const func = object[key];
            if (typeof func === 'function') {
                object[`${key}Async`] = util_1.promisify(func);
                console.log(`${key}Async`);
            }
        }
    }
}
function promisifyAll(object) {
    _promisifyAllFunctions(object);
    const proto = Object.getPrototypeOf(object);
    if (proto) {
        _promisifyAllFunctions(proto);
    }
    return object;
}
exports.promisifyAll = promisifyAll;
